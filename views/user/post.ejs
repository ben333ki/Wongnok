<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ไก่ทอด อร่อยเหาะ</title>
    <link rel="stylesheet" href="/css/post.css">
</head>
<body>
    <%- include('../partials/header.ejs') %>
    <main>
        <section class="recipe">
            <div class="post-header">
                <img src="/images/ไก่ทอดอร่อยเหาะ.jpg" alt="อาหาร" class="post-image">
                <div class="post-info">
                    <div class="author-info">
                        <img src="/images/LogoSample.png" alt="Profile" class="author-image">
                        <span class="author-name">Pongtawat Ian</span>
                    </div>
                    <h2 class="post-title">ไก่ทอด อร่อยเหาะ</h2>
                    <div class="post-rating">
                        <span class="rating-stars">⭐⭐⭐✩✩</span> 
                        <span class="rating-value">2.5 (64 rating)</span>
                    </div>
                    <p class="post-description">ไก่ทอดสูตรต้นตำหรับจากจีน ที่ถูกส่งต่อมาอย่างยาวนานมากกว่า 100 ปี</p>
                </div>
            </div>            
            <div class="ingredients-section">
                <div class="ingredients-header">
                    <span class="ingredient-title">ส่วนผสม</span>
                    <span class="amount-title">ปริมาณ</span>
                </div>
                <div class="ingredient-item">
                    <span class="ingredient">ไก่สด</span>
                    <span class="amount">40 กรัม</span>
                </div>
                <div class="ingredient-item">
                    <span class="ingredient">ข้าวคั่ว</span>
                    <span class="amount">50 กรัม</span>
                </div>
                <div class="ingredient-item">
                    <span class="ingredient">ซีอิ๊วขาว</span>
                    <span class="amount">2 ถ้วย</span>
                </div>
                <div class="ingredient-item">
                    <span class="ingredient">รากผักชี</span>
                    <span class="amount">2 กำ</span>
                </div>
                <div class="ingredient-item">
                    <span class="ingredient">แป้งทอดกรอบ</span>
                    <span class="amount">ตามใจชอบ</span>
                </div>
            </div>
            <div class="post-detail">
                <h1><%= post.post_topic %></h1>
                <p><%= post.post_describe %></p>
                <% if (post.post_picture) { %>
                    <img src="/<%= post.post_picture %>" alt="Post Picture" />
                <% } %>
        
                <% if (post.youtube_url) { %>
                    <div class="youtube-preview">
                        <h3>Watch Video:</h3>
                        <iframe 
                            width="560" 
                            height="315" 
                            src="https://www.youtube.com/embed/<%= post.youtube_url.split('v=')[1] %>" 
                            title="YouTube video player" 
                            frameborder="0" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                            allowfullscreen>
                        </iframe>
                    </div>
                <% } %>
            </div>

            <div class="steps-section">
                <h2>วิธีทำ</h2>
                <div class="step-item">
                    <img src="/images/ทอดไก่.jpg" alt="ขั้นตอนที่ 1" class="step-image">
                    <div class="step-content">
                        <strong>ขั้นตอนที่ 1</strong><br>
                        นำทุกอย่างออกจากไก่มาผสมกัน อย่าลืมสับรากผักชี
                    </div>
                </div>
                <div class="step-item">
                    <img src="/images/ทอดไก่.jpg" alt="ขั้นตอนที่ 2" class="step-image">
                    <div class="step-content">
                        <strong>ขั้นตอนที่ 2</strong><br>
                        นำไก่มาคลุกกับแป้งที่เตรียมไว้
                    </div>
                </div>
                <div class="step-item">
                    <img src="/images/ทอดไก่.jpg" alt="ขั้นตอนที่ 3" class="step-image">
                    <div class="step-content">
                        <strong>ขั้นตอนที่ 3</strong><br>
                        ตั้งไฟแรง รอจนน้ำมันเดือด
                    </div>
                </div>
                <div class="step-item">
                    <img src="/images/ทอดไก่.jpg" alt="ขั้นตอนที่ 4" class="step-image">
                    <div class="step-content">
                        <strong>ขั้นตอนที่ 4</strong><br>
                        นำลงไปทอด จนสุก ยกขึ้นสะเด็ดน้ำมัน และนำเสิร์ฟ
                    </div>
                </div>
            </div>
            
        </section>

        <section class="comments">
            <h2>ความคิดเห็น</h2>
            <div class="comment-item">
                <img src="/images/LogoSample.png" alt="comment 1" class="comment-image">
                <div class="comment-content">
                    <strong>นาย สมชาย บุญมาก</strong><br>
                    วันนี้ได้มีโอกาสลองชิมข้าวผัดทะเลจากร้าน ต้องบอกว่าไม่ผิดหวังเลย
                </div>
            </div>
            <div class="comment-item">
                <img src="/images/LogoSample.png" alt="comment 2" class="comment-image">
                <div class="comment-content">
                    <strong>ป้าศรีสยองขวัญ</strong><br>
                    วันนี้ได้มีโอกาสลองชิมข้าวผัดทะเลจากร้าน ต้องบอกว่าไม่ผิดหวังเลย TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST
                </div>
            </div>
            <div class="comment-item">
                <img src="/images/LogoSample.png" alt="comment 3" class="comment-image">
                <div class="comment-content">
                    <strong>Dr.Artchawin Supanitassanaphon</strong><br>
                    วันนี้ได้มีโอกาสลองชิมข้าวผัดทะเลจากร้าน ต้องบอกว่าไม่ผิดหวังเลย TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST
                </div>
            </div>
        </section>
    </main>
    <%- include('../partials/comment-section.ejs') %>
    <script>
        document.getElementById('sendBtn').addEventListener('click', function () {
            const commentInput = document.getElementById('commentInput'); // รับค่าจาก input
            const commentText = commentInput.value.trim(); // ตัดช่องว่างซ้ายขวา

            if (commentText) { // เช็คว่ามีข้อความหรือไม่
                const commentContainer = document.getElementById('commentsContainer');

                // สร้าง DOM ของคอมเมนต์ใหม่
                const newComment = document.createElement('div');
                newComment.classList.add('comment');
                newComment.innerHTML = `
                    <img src="/images/LogoSample.png" alt="Profile" class="profile-img">
                    <div class="comment-details">
                        <p class="username">@คุณ</p>
                        <p class="comment-text">${commentText}</p>
                    </div>
                    <div class="menu-container">
                        <img src="/images/ellipsis-vertical.png" class="menu-btn" onclick="toggleMenu(this)">
                        <div class="menu-options">
                            <button onclick="deleteComment(this)">ลบ</button>
                        </div>
                    </div>
                `;
                commentContainer.appendChild(newComment);

                commentInput.value = '';
            } else {
                alert('กรุณาใส่ข้อความก่อนส่งความคิดเห็น');
            }
        });

        // ฟังก์ชันสำหรับเคลียร์ input
        function toggleMenu(button) {
            const menuOptions = button.nextElementSibling;
            menuOptions.style.display = menuOptions.style.display === 'block' ? 'none' : 'block';
        }
        function clearComment() {
            const commentInput = document.getElementById('commentInput'); // เลือก input
            commentInput.value = ''; // เคลียร์ค่าใน input
        }

        // ฟังก์ชันสำหรับลบคอมเมนต์
        function deleteComment(button) {
            const comment = button.closest('.comment');
            comment.remove();
        }
    </script>
</body>
</html>
